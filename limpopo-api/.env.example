################################################################################
# Limpopo Connect API - Environment Example                                    #
################################################################################
# Copy this file to .env and fill in required values.                          #
# NEVER commit a real .env file.                                               #
# Legend:                                                                      #
#   (required)  -> Must be set in production                                   #
#   (recommended) -> Strongly advised; falls back to less secure default       #
#   (optional)  -> Enables optional / integration functionality                 #
#   (legacy)    -> Temporary during migration; plan removal                    #
# Generation Tips:                                                             #
#   - Secure secret: openssl rand -base64 48 | tr -d '\n'                      #
#   - 64+ bytes for JWT where possible                                         #
#   - Keep SERVICE_ROLE & JWT secrets server-only                              #
################################################################################

########################################
# Core Runtime                                                               #
########################################
NODE_ENV=development              # development | production | test
PORT=3001                         # API HTTP port
PROJECT_URL=http://localhost:5173 # Frontend base URL (set to prod domain when deploying)

########################################
# Authentication / Security                                                  #
########################################
# JWT secret (required) 32+ random chars. If KEY_VAULT_URL is set and contains
# secret name 'jwt-secret', that vault value overrides this env for production.
JWT_SECRET=change_me_generate_a_long_random_secret_value______________________

# Azure Key Vault endpoint (legacy) - only if still using Azure for secrets
# KEY_VAULT_URL=https://your-key-vault-name.vault.azure.net/

########################################
# Supabase (required)                                                        #
########################################
# Obtain these from your Supabase project dashboard.
SUPABASE_URL=https://your-project-ref.supabase.co
SUPABASE_ANON_KEY=your-anon-key

# Service role key (required server-side) DO NOT expose to frontend builds.
SUPABASE_SERVICE_ROLE_KEY=your-service-role-key

# Optional: direct Postgres connection (rarely needed; prefer Supabase client)
# SUPABASE_DB_URL=postgresql://postgres:postgres@localhost:54322/postgres

########################################
# Database (legacy path)                                                     #
########################################
# Legacy connection string used by transitional modules (db.ts/db.js). If you
# have SUPABASE_SERVICE_ROLE_KEY set you may not need this. Keep while legacy
# code remains; remove once fully migrated.
# DATABASE_URL=postgresql://postgres:postgres@localhost:54322/postgres

########################################
# Payments                                                                   #
########################################
# Provider selector (optional). Implementations: stub (built-in), stripe (WIP), payfast (WIP)
PAYMENT_PROVIDER=stub

########################################
# File Uploads / Storage (legacy Azure)                                      #
########################################
# Used by existing uploadService & signed URL functions. If migrating to
# Supabase Storage, leave these unset and refactor code accordingly.
# AZURE_STORAGE_ACCOUNT_NAME=
# AZURE_STORAGE_ACCOUNT_KEY=
# AzureWebJobsStorage=DefaultEndpointsProtocol=... # Only if Azure Functions deps remain

########################################
# AI / Inference (optional)                                                  #
########################################
# GitHub token for GitHub Models (scope: read:packages recommended minimal)
# GITHUB_TOKEN=ghp_your_token_here

########################################
# Observability / Logging (optional)                                         #
########################################
# LOG_LEVEL=info            # info | debug | warn | error (not yet enforced)

########################################
# Local Development Notes                                                    #
########################################
# 1. cp .env.example .env
# 2. Fill required: SUPABASE_URL, SUPABASE_ANON_KEY, SUPABASE_SERVICE_ROLE_KEY, JWT_SECRET
# 3. Start backend: npm run dev --prefix limpopo-api
# 4. Tests may set/override some env (see tests/ directory)
# 5. Never reuse production secrets locally

########################################
# Migration / Cleanup Checklist (reference)                                  #
########################################
# - Remove DATABASE_URL once all modules use Supabase client only            #
# - Remove Azure storage vars once uploadService migrated                    #
# - Remove KEY_VAULT_URL if no longer using Azure Key Vault                  #
################################################################################